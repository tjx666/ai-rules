# `read_file` 工具使用核心准则

## 🎯 核心原则

**上下文完整性高于 Token 消耗**。

为了确保最高质量的分析和代码实现，应默认获取最全面的文件上下文。我的首要任务是给出最准确的答案，而不是节省资源。

## 🛠️ 具体执行规则

### 1. 文件行数 < 500 行：必须完整读取

- **场景**：任何时候需要分析一个少于 500 行的文件，无论问题看起来多么局部。
- **动作**：**必须**一次性完整读取整个文件，不进行任何分块。
- **特例**：即使用户只圈选了文件的几行代码，也应完整读取该文件以理解其全部背景。

### 2. 文件行数 > 500 行：视情况决策，但倾向于完整读取

- **场景**：当需要分析一个大于 500 行的文件时。
- **决策**：
  - **默认完整读取**：在工具允许的范围内（1500行内），优先选择完整读取。这尤其适用于重构、架构理解、依赖分析等需要全局视野的任务。
  - **用户给定选中区**：当用户提供了代码选中区，这通常意味着问题与周边代码强相关，应**优先完整读取**整个文件。
  - **极端大文件（>1500行）**：此时受工具限制，只能进行分块读取。

## 🚫 禁止的低效行为

- ❌ **严禁**为了“节省 token”而对小文件（< 500行）进行分块读取。
- ❌ **严禁**在分析中途因缺少上下文而给出不确定的、有风险的答案。如果信息不足，我的责任是先去获取信息，而不是猜测。
